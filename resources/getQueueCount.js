var ticketInfoForPassengerForm={'cardTypes':[{'end_station_name':null,'end_time':null,'id':'1','start_station_name':null,'start_time':null,'value':'\u4E8C\u4EE3\u8EAB\u4EFD\u8BC1'},{'end_station_name':null,'end_time':null,'id':'C','start_station_name':null,'start_time':null,'value':'\u6E2F\u6FB3\u901A\u884C\u8BC1'},{'end_station_name':null,'end_time':null,'id':'G','start_station_name':null,'start_time':null,'value':'\u53F0\u6E7E\u901A\u884C\u8BC1'},{'end_station_name':null,'end_time':null,'id':'B','start_station_name':null,'start_time':null,'value':'\u62A4\u7167'}],'isAsync':'1','key_check_isChange':'CCDD80BC74434EF272078C8F62D0B07444E892F6C88DC75122C1978F','leftDetails':['\u4E00\u7B49\u5EA7(479.00\u5143)\u6709\u7968','\u4E8C\u7B49\u5EA7(289.00\u5143)\u6709\u7968','\u5546\u52A1\u5EA7(903.00\u5143)18\u5F20\u7968','\u65E0\u5EA7(289.00\u5143)\u65E0\u7968'],'leftTicketStr':'eAFcnooPXMOKpbJdGidW4j4Js1uQwhE9GH3u1EbkdLBul89p8D8abGdhHIg%3D','limitBuySeatTicketDTO':{'seat_type_codes':[{'end_station_name':null,'end_time':null,'id':'M','start_station_name':null,'start_time':null,'value':'\u4E00\u7B49\u5EA7'},{'end_station_name':null,'end_time':null,'id':'O','start_station_name':null,'start_time':null,'value':'\u4E8C\u7B49\u5EA7'},{'end_station_name':null,'end_time':null,'id':'9','start_station_name':null,'start_time':null,'value':'\u5546\u52A1\u5EA7'}],'ticket_seat_codeMap':{'3':[{'end_station_name':null,'end_time':null,'id':'O','start_station_name':null,'start_time':null,'value':'\u4E8C\u7B49\u5EA7'}],'2':[{'end_station_name':null,'end_time':null,'id':'9','start_station_name':null,'start_time':null,'value':'\u5546\u52A1\u5EA7'},{'end_station_name':null,'end_time':null,'id':'M','start_station_name':null,'start_time':null,'value':'\u4E00\u7B49\u5EA7'},{'end_station_name':null,'end_time':null,'id':'O','start_station_name':null,'start_time':null,'value':'\u4E8C\u7B49\u5EA7'}],'1':[{'end_station_name':null,'end_time':null,'id':'9','start_station_name':null,'start_time':null,'value':'\u5546\u52A1\u5EA7'},{'end_station_name':null,'end_time':null,'id':'M','start_station_name':null,'start_time':null,'value':'\u4E00\u7B49\u5EA7'},{'end_station_name':null,'end_time':null,'id':'O','start_station_name':null,'start_time':null,'value':'\u4E8C\u7B49\u5EA7'}],'4':[{'end_station_name':null,'end_time':null,'id':'9','start_station_name':null,'start_time':null,'value':'\u5546\u52A1\u5EA7'},{'end_station_name':null,'end_time':null,'id':'M','start_station_name':null,'start_time':null,'value':'\u4E00\u7B49\u5EA7'},{'end_station_name':null,'end_time':null,'id':'O','start_station_name':null,'start_time':null,'value':'\u4E8C\u7B49\u5EA7'}]},'ticket_type_codes':[{'end_station_name':null,'end_time':null,'id':'1','start_station_name':null,'start_time':null,'value':'\u6210\u4EBA\u7968'},{'end_station_name':null,'end_time':null,'id':'2','start_station_name':null,'start_time':null,'value':'\u513F\u7AE5\u7968'},{'end_station_name':null,'end_time':null,'id':'3','start_station_name':null,'start_time':null,'value':'\u5B66\u751F\u7968'},{'end_station_name':null,'end_time':null,'id':'4','start_station_name':null,'start_time':null,'value':'\u6B8B\u519B\u7968'}]},'maxTicketNum':'5','orderRequestDTO':{'adult_num':0,'apply_order_no':null,'bed_level_order_num':null,'bureau_code':null,'cancel_flag':null,'card_num':null,'channel':null,'child_num':0,'choose_seat':null,'disability_num':0,'end_time':{'date':1,'day':4,'hours':22,'minutes':55,'month':0,'seconds':0,'time':53700000,'timezoneOffset':-480,'year':70},'exchange_train_flag':'0','from_station_name':'\u4E0A\u6D77','from_station_telecode':'SHH','get_ticket_pass':null,'id_mode':'Y','isShowPassCode':null,'leftTicketGenTime':null,'order_date':null,'passengerFlag':null,'realleftTicket':null,'reqIpAddress':null,'reqTimeLeftStr':null,'reserve_flag':'A','seat_detail_type_code':null,'seat_type_code':null,'sequence_no':null,'start_time':{'date':1,'day':4,'hours':19,'minutes':51,'month':0,'seconds':0,'time':42660000,'timezoneOffset':-480,'year':70},'start_time_str':null,'station_train_code':'G7300','student_num':0,'ticket_num':0,'ticket_type_order_num':null,'to_station_name':'\u5F90\u5DDE\u4E1C','to_station_telecode':'UUH','tour_flag':'dc','trainCodeText':null,'train_date':{'date':31,'day':3,'hours':0,'minutes':0,'month':0,'seconds':0,'time':1517328000000,'timezoneOffset':-480,'year':118},'train_date_str':null,'train_location':null,'train_no':'55000G730040','train_order':null,'varStr':null},'purpose_codes':'00','queryLeftNewDetailDTO':{'BXRZ_num':'-1','BXRZ_price':'0','BXYW_num':'-1','BXYW_price':'0','EDRZ_num':'-1','EDRZ_price':'0','EDSR_num':'-1','EDSR_price':'0','ERRB_num':'-1','ERRB_price':'0','GG_num':'-1','GG_price':'0','GR_num':'-1','GR_price':'0','HBRW_num':'-1','HBRW_price':'0','HBRZ_num':'-1','HBRZ_price':'0','HBYW_num':'-1','HBYW_price':'0','HBYZ_num':'-1','HBYZ_price':'0','RW_num':'-1','RW_price':'0','RZ_num':'-1','RZ_price':'0','SRRB_num':'-1','SRRB_price':'0','SWZ_num':'18','SWZ_price':'09030','TDRZ_num':'-1','TDRZ_price':'0','TZ_num':'-1','TZ_price':'0','WZ_num':'0','WZ_price':'02890','WZ_seat_type_code':'O','YB_num':'-1','YB_price':'0','YDRZ_num':'-1','YDRZ_price':'0','YDSR_num':'-1','YDSR_price':'0','YRRB_num':'-1','YRRB_price':'0','YW_num':'-1','YW_price':'0','YYRW_num':'-1','YYRW_price':'0','YZ_num':'-1','YZ_price':'0','ZE_num':'443','ZE_price':'02890','ZY_num':'39','ZY_price':'04790','arrive_time':'2255','control_train_day':'','controlled_train_flag':null,'controlled_train_message':null,'day_difference':null,'end_station_name':null,'end_station_telecode':null,'from_station_name':'\u4E0A\u6D77','from_station_telecode':'SHH','is_support_card':null,'lishi':'03:04','seat_feature':'','start_station_name':null,'start_station_telecode':null,'start_time':'1951','start_train_date':'','station_train_code':'G7300','to_station_name':'\u5F90\u5DDE\u4E1C','to_station_telecode':'UUH','train_class_name':null,'train_no':'55000G730040','train_seat_feature':'','yp_ex':''},'queryLeftTicketRequestDTO':{'arrive_time':'22:55','bigger20':'Y','exchange_train_flag':'0','from_station':'SHH','from_station_name':'\u4E0A\u6D77','from_station_no':'01','lishi':'03:04','login_id':null,'login_mode':null,'login_site':null,'purpose_codes':'00','query_type':null,'seatTypeAndNum':null,'seat_types':'O9OM','start_time':'19:51','start_time_begin':null,'start_time_end':null,'station_train_code':'G7300','ticket_type':null,'to_station':'UUH','to_station_name':'\u5F90\u5DDE\u4E1C','to_station_no':'08','train_date':'20180131','train_flag':null,'train_headers':null,'train_no':'55000G730040','useMasterPool':true,'useWB10LimitTime':true,'usingGemfireCache':false,'ypInfoDetail':'eAFcnooPXMOKpbJdGidW4j4Js1uQwhE9GH3u1EbkdLBul89p8D8abGdhHIg%3D'},'tour_flag':'dc','train_location':'H3'};

var orderRequestDTO={'adult_num':0,'apply_order_no':null,'bed_level_order_num':null,'bureau_code':null,'cancel_flag':null,'card_num':null,'channel':null,'child_num':0,'choose_seat':null,'disability_num':0,'end_time':{'date':1,'day':4,'hours':22,'minutes':55,'month':0,'seconds':0,'time':53700000,'timezoneOffset':-480,'year':70},'exchange_train_flag':'0','from_station_name':'\u4E0A\u6D77','from_station_telecode':'SHH','get_ticket_pass':null,'id_mode':'Y','isShowPassCode':null,'leftTicketGenTime':null,'order_date':null,'passengerFlag':null,'realleftTicket':null,'reqIpAddress':null,'reqTimeLeftStr':null,'reserve_flag':'A','seat_detail_type_code':null,'seat_type_code':null,'sequence_no':null,'start_time':{'date':1,'day':4,'hours':19,'minutes':51,'month':0,'seconds':0,'time':42660000,'timezoneOffset':-480,'year':70},'start_time_str':null,'station_train_code':'G7300','student_num':0,'ticket_num':0,'ticket_type_order_num':null,'to_station_name':'\u5F90\u5DDE\u4E1C','to_station_telecode':'UUH','tour_flag':'dc','trainCodeText':null,
'train_date':{'date':31,'day':3,'hours':0,'minutes':0,'month':0,'seconds':0,'time':1517328000000,'timezoneOffset':-480,'year':118},
'train_date_str':null,'train_location':null,'train_no':'55000G730040','train_order':null,'varStr':null};


function E(V, W) {
    var X = "";
    if (ticketInfoForPassengerForm.isAsync == ticket_submit_order.request_flag.isAsync && ticketInfoForPassengerForm.queryLeftTicketRequestDTO.ypInfoDetail != "") {
        $.ajax({
            url: ctx + "confirmPassenger/getQueueCount",
            type: "post",
            data: {
                train_date: new Date(orderRequestDTO.train_date.time).toString(),
                train_no: orderRequestDTO.train_no,
                stationTrainCode: orderRequestDTO.station_train_code,
                seatType: limit_tickets[0].seat_type,
                fromStationTelecode: orderRequestDTO.from_station_telecode,
                toStationTelecode: orderRequestDTO.to_station_telecode,
                leftTicket: ticketInfoForPassengerForm.queryLeftTicketRequestDTO.ypInfoDetail,
                purpose_codes: V,
                train_location: ticketInfoForPassengerForm.train_location,
                isCheckOrderInfo: W
            },
            dataType: "json",
            success: function(Y) {
                if (Y.status) {
                    if (Y.data.isRelogin == "Y") {
                        window.location.href = ctx + "login/init?random=" + new Date().getTime()
                    }
                    var Z = Y.data.ticket.split(",");
                    X = "本次列车，" + (limit_tickets[0].seat_type_name).split("（")[0] + "余票";
                    if (parseInt(Z[0]) >= 0) {
                        X += "<strong>" + Z[0] + "</strong>张"
                    } else {
                        X += Z[0]
                    }
                    if (Z.length > 1) {
                        X += ",无座余票";
                        if (parseInt(Z[1]) >= 0) {
                            X += "<strong>" + Z[1] + "</strong>张"
                        } else {
                            X += Z[1]
                        }
                    }
                    X += "。";
                    if (Y.data.op_2 == "true") {
                        X += '<font color="red">目前排队人数已经超过余票张数，请您选择其他席别或车次。</font>';
                        $("#qr_submit_id").hide()
                    } else {
                        if (Y.data.countT > 0) {
                            X += '目前排队人数<font color="red">' + Y.data.countT + "</font>人，";
                            X += "<br/>请确认以上信息是否正确，点击“确认”后，系统将为您随机分配席位。"
                        }
                    }
                    var aa = $("#sy_ticket_num_id");
                    if (aa != null) {
                        aa.html(X)
                    }
                    doTicketTitleShow(true);
                    renderCheckTickInfo(limit_tickets);
                    N("checkticketinfo_id");
                    if (parseInt(Z[0]) > 0 || parseInt(Z[1]) > 0 || "充足" == Z[0] || "充足" == Z[1]) {
                        S()
                    }
                } else {
                    S()
                }
            },
            error: function(Y, aa, Z) {
                S();
                return
            }
        })
    } else {
        doTicketTitleShow(true);
        renderCheckTickInfo(limit_tickets);
        N("checkticketinfo_id");
        S()
    }
}
